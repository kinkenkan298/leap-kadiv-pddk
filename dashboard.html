<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard Leap</title>
    <link rel="stylesheet" href="./plugins/fontawesome-free/css/all.min.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"
    />

    <!-- Theme style -->
    <link rel="stylesheet" href="./css/adminlte.min.css" />
    <style>
      /* 1. Card Styling */
      .card-custom {
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 0.5rem;
        /* rounded-md */
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      }

      /* 2. Soft Badges (Kunci estetika modern) */
      .badge-soft-success {
        background-color: #dcfce7;
        /* green-100 */
        color: #166534;
        /* green-800 */
        border: 1px solid #bbf7d0;
      }

      .badge-soft-warning {
        background-color: #fef9c3;
        /* yellow-100 */
        color: #854d0e;
        /* yellow-800 */
        border: 1px solid #fde047;
      }

      .badge-soft-danger {
        background-color: #fee2e2;
        /* red-100 */
        color: #991b1b;
        /* red-800 */
        border: 1px solid #fecaca;
      }

      .badge-pill-custom {
        padding: 0.35em 0.8em;
        font-weight: 500;
        font-size: 0.75rem;
        border-radius: 9999px;
      }

      /* 3. Avatar */
      .avatar-circle {
        width: 32px;
        height: 32px;
        background-color: #dbeafe;
        /* blue-100 */
        color: #1d4ed8;
        /* blue-700 */
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: 600;
        margin-right: 0.75rem;
      }

      /* 4. Table Tweaks */
      .table th {
        font-size: 0.875rem;
        font-weight: 500;
        color: #64748b;
        /* slate-500 */
        border-top: none;
        border-bottom: 1px solid #e2e8f0;
      }

      .table td {
        vertical-align: middle;
        font-size: 0.875rem;
        border-top: 1px solid #f1f5f9;
        color: #334155;
      }

      /* 5. Input Icons */
      .has-search .form-control {
        padding-left: 2.375rem;
      }

      .has-search .form-control-feedback {
        position: absolute;
        z-index: 2;
        display: block;
        width: 2.375rem;
        height: 2.375rem;
        line-height: 2.375rem;
        text-align: center;
        pointer-events: none;
        color: #94a3b8;
        /* slate-400 */
      }

      /* Styles for Remidi Cards */
      .small-box {
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .small-box:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .small-box.bg-remidi-orange {
        background: linear-gradient(135deg, #f97316 0%, #fb923c 100%);
        color: white;
      }

      .small-box.bg-remidi-purple {
        background: linear-gradient(135deg, #a855f7 0%, #d946ef 100%);
        color: white;
      }

      .modal-detail-remidi {
        font-size: 0.875rem;
      }

      .remidi-table-header {
        background-color: #f8fafc;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.05em;
      }

      .remidi-item {
        padding: 0.75rem 0;
        border-bottom: 1px solid #f1f5f9;
      }

      .remidi-item:last-child {
        border-bottom: none;
      }

      .guru-section {
        margin-bottom: 1.5rem;
        padding: 1rem;
        background-color: #f8fafc;
        border-radius: 0.5rem;
        border-left: 4px solid #f97316;
      }
    </style>
  </head>

  <body class="hold-transition sidebar-mini">
    <!-- Site wrapper -->
    <div class="wrapper">
      <!-- Navbar -->
      <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button">
              <i class="fas fa-bars"></i>
            </a>
          </li>
          <!-- Semester Filter -->
          <li class="nav-item ml-3">
            <div style="display: flex; align-items: center; gap: 0.5rem">
              <span style="font-size: 0.875rem; color: #64748b">Semester:</span>
              <select
                id="globalSemesterFilter"
                class="form-control"
                style="
                  width: 140px;
                  font-size: 0.875rem;
                  padding: 0.375rem 0.75rem;
                "
              >
                <option value="">Semua Semester</option>
                <option value="1">Semester 1</option>
                <option value="2">Semester 2</option>
              </select>
            </div>
          </li>
        </ul>

        <!-- Right navbar links -->
        <ul class="navbar-nav ml-auto">
          <!-- Notifications Dropdown Menu -->
          <li class="nav-item dropdown">
            <a class="nav-link" data-toggle="dropdown" href="#">
              <i class="far fa-bell"></i>
              <span class="badge badge-warning navbar-badge">15</span>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
              <span class="dropdown-item dropdown-header"
                >15 Notifications</span
              >
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item">
                <i class="fas fa-envelope mr-2"></i> 4 new messages
                <span class="float-right text-muted text-sm">3 mins</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item">
                <i class="fas fa-users mr-2"></i> 8 friend requests
                <span class="float-right text-muted text-sm">12 hours</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item">
                <i class="fas fa-file mr-2"></i> 3 new reports
                <span class="float-right text-muted text-sm">2 days</span>
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item dropdown-footer"
                >See All Notifications</a
              >
            </div>
          </li>
        </ul>
      </nav>
      <!-- /.navbar -->

      <!-- Main Sidebar Container -->
      <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <!-- Brand Logo -->
        <a href="./dashboard.html" class="brand-link">
          <img
            src="./img/leap.png"
            alt=" Logo"
            class="brand-image elevation-3"
            style="opacity: 0.8"
          />
          <span class="brand-text font-weight-light">Leap Surabaya</span>
        </a>

        <div class="sidebar">
          <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="image">
              <img
                src="./img/user2-160x160.jpg"
                class="img-circle elevation-2"
                alt="User Image"
              />
            </div>
            <div class="info">
              <a href="#" class="d-block">M Rahmat Muttaqin</a>
            </div>
          </div>

          <nav class="mt-2">
            <ul
              class="nav nav-pills nav-sidebar flex-column"
              data-widget="treeview"
              role="menu"
              data-accordion="false"
            >
              <li class="nav-item">
                <a href="./dashboard.html" class="nav-link active">
                  <i data-lucide="layout-dashboard"></i>
                  <p>Dashboard</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="./kalendar.html" class="nav-link">
                  <i data-lucide="calendar-days"></i>
                  <p>Kalendar Pendidikan</p>
                </a>
              </li>
              <li class="nav-header">AKADEMIK</li>
              <li class="nav-item">
                <a href="./kelas.html" class="nav-link">
                  <i data-lucide="users"></i>
                  <p>Kelas & Murid</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="./rapot.html" class="nav-link">
                  <i data-lucide="book-open"></i>
                  <p>Rekap Rapor</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="./absensi.html" class="nav-link">
                  <i data-lucide="check-square"></i>
                  <p>Rekap Absensi</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="./catatan.html" class="nav-link">
                  <i data-lucide="users"></i>
                  <p>Catatan Siswa</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="./catatan-guru.html" class="nav-link">
                  <i data-lucide="square-user-round"></i>
                  <p>Catatan Kelas</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="./surat.html" class="nav-link">
                  <i data-lucide="file-text"></i>
                  <p>Surat Tugas</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="./penilian.html" class="nav-link">
                  <i data-lucide="award"></i>
                  <p>Penilian Kinerja</p>
                </a>
              </li>
              <li class="nav-header">PENGATURAN</li>

              <li class="nav-item">
                <a href="#" class="nav-link">
                  <i class="nav-icon fas fa-cog"></i>
                  <p>Pengaturan</p>
                </a>
              </li>
            </ul>
          </nav>
          <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <div class="container-fluid">
            <div class="row mb-2">
              <div class="col-sm-6">
                <h1>Dashboard</h1>
              </div>
              <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                  <li class="breadcrumb-item"><a href="#">Home</a></li>
                  <li class="breadcrumb-item active">Dashboard</li>
                </ol>
              </div>
            </div>
          </div>
          <!-- /.container-fluid -->
        </section>

        <!-- Main content -->
        <section class="content">
          <div class="container-fluid">
            <!-- Statistics Small Boxes -->
            <div class="row">
              <div class="col-lg-3 col-6">
                <div class="small-box bg-info">
                  <div class="inner">
                    <h3>10</h3>
                    <p>Jumlah Guru</p>
                  </div>
                  <div class="icon">
                    <i class="fas fa-graduation-cap"></i>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-6">
                <div class="small-box bg-success">
                  <div class="inner">
                    <h3>20</h3>
                    <p>Jumlah Kursus / Pendidikan</p>
                  </div>
                  <div class="icon">
                    <i class="fas fa-book-open"></i>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-6">
                <div class="small-box bg-primary">
                  <div class="inner">
                    <h3>10</h3>
                    <p>Siswa Baru</p>
                  </div>
                  <div class="icon">
                    <i class="fas fa-user-plus"></i>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-6">
                <div class="small-box bg-danger">
                  <div class="inner">
                    <h3>0</h3>
                    <p>Siswa Keluar</p>
                  </div>
                  <div class="icon">
                    <i class="fas fa-user-minus"></i>
                  </div>
                </div>
              </div>
            </div>

            <!-- Remidi Statistics -->
            <div class="row mb-4">
              <div class="col-lg-3 col-6">
                <div
                  class="small-box bg-remidi-orange"
                  data-toggle="modal"
                  data-target="#remidiDetailModal"
                >
                  <div class="inner">
                    <h3 id="totalSiswaRemidi">0</h3>
                    <p>Total Siswa Remidi</p>
                  </div>
                  <div class="icon">
                    <i class="fas fa-exclamation-triangle"></i>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-6">
                <div
                  class="small-box bg-remidi-purple"
                  data-toggle="modal"
                  data-target="#guruRemidiModal"
                >
                  <div class="inner">
                    <h3 id="totalGuruRemidi">0</h3>
                    <p>Guru dengan Siswa Remidi</p>
                  </div>
                  <div class="icon">
                    <i class="fas fa-chalkboard-user"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <h4 class="mb-4 font-weight-bold">Status Laporan Guru</h4>
            <div class="row mb-4">
              <div class="col-sm-6 col-md-4 mb-2 mb-sm-0">
                <div class="form-group has-search mb-0">
                  <span class="fa fa-search form-control-feedback"></span>
                  <input
                    type="text"
                    id="searchInput"
                    class="form-control"
                    placeholder="Cari nama guru..."
                  />
                </div>
              </div>
              <div class="col-sm-6 col-md-3 ml-auto">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text bg-white border-right-0">
                      <i class="text-muted small" data-lucide="funnel"></i>
                    </span>
                  </div>
                  <select class="form-control border-left-0" id="statusFilter">
                    <option value="all">Semua Status</option>
                    <option value="submitted">Sudah Lapor</option>
                    <option value="pending">Belum Lapor</option>
                    <option value="late">Terlambat</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="card card-custom overflow-hidden">
              <div class="table-responsive">
                <table class="table table-hover mb-0">
                  <thead class="bg-light">
                    <tr>
                      <th scope="col" class="pl-4">Nama Guru</th>
                      <th scope="col">Rombel</th>
                      <th scope="col">Kursus / Tingkatan</th>
                      <th scope="col">Status Laporan</th>
                      <th scope="col">Terakhir Submit</th>
                      <th scope="col" class="text-right pr-4">Aksi</th>
                    </tr>
                  </thead>
                  <tbody id="tableBody">
                    <!-- <tr>
                      <td colspan="6" class="text-center py-5 text-muted">
                        <i class="fas fa-inbox fa-2x mb-3 text-light-gray"></i>
                        <p class="mb-0">Tidak ada data guru yang ditemukan.</p>
                      </td>
                    </tr> -->
                    <tr>
                      <td class="pl-4">
                        <div class="d-flex align-items-center">
                          <div class="avatar-circle">MY</div>
                          <span class="font-weight-bold text-dark"
                            >Muhammad Yusril</span
                          >
                        </div>
                      </td>
                      <td>Coding 1C Curious Creators</td>
                      <td>LEAP - Coding Class 2025 / Curious Creators</td>
                      <td>
                        <span class="badge badge-soft-success badge-pill-custom"
                          >Sudah Lapor</span
                        >
                      </td>
                      <td class="text-muted small">15 Jan 2026</td>
                      <td class="text-right pr-4">-</td>
                    </tr>
                    <tr>
                      <td class="pl-4">
                        <div class="d-flex align-items-center">
                          <div class="avatar-circle">UY</div>
                          <span class="font-weight-bold text-dark"
                            >Ulfasiyah, S.S.</span
                          >
                        </div>
                      </td>
                      <td>09 GOGO 1 SR2</td>
                      <td>LEAP - General English 2024 / GOGO 1</td>
                      <td>
                        <span class="badge badge-soft-warning badge-pill-custom"
                          >Belum Lapor</span
                        >
                      </td>
                      <td class="text-muted small">-</td>
                      <td class="text-right pr-4">
                        <button
                          class="btn btn-sm btn-outline-warning text-dark font-weight-bold"
                          style="
                            border-color: #fdba74;
                            background-color: transparent;
                          "
                          onmouseover="this.style.backgroundColor = '#fff7ed'"
                          onmouseout="
                            this.style.backgroundColor = 'transparent'
                          "
                          onclick="alert('Mengirim email pengingat ke guru...')"
                        >
                          <i
                            class="fas fa-envelope-open-text mr-1 text-warning"
                          ></i>
                          Ingatkan
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td class="pl-4">
                        <div class="d-flex align-items-center">
                          <div class="avatar-circle">RB</div>
                          <span class="font-weight-bold text-dark"
                            >Rini Budi Rahayu, S.Pd.</span
                          >
                        </div>
                      </td>
                      <td>41 WINNER 6 SR3</td>
                      <td>LEAP - General English 2024 / WINNER 6</td>
                      <td>
                        <span class="badge badge-soft-danger badge-pill-custom"
                          >Terlambat</span
                        >
                      </td>
                      <td class="text-muted small">-</td>
                      <td class="text-right pr-4">
                        <button
                          class="btn btn-sm btn-outline-warning text-dark font-weight-bold"
                          style="
                            border-color: #fdba74;
                            background-color: transparent;
                          "
                          onmouseover="this.style.backgroundColor = '#fff7ed'"
                          onmouseout="
                            this.style.backgroundColor = 'transparent'
                          "
                          onclick="alert('Mengirim email pengingat ke guru')"
                        >
                          <i
                            class="fas fa-envelope-open-text mr-1 text-warning"
                          ></i>
                          Ingatkan
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td class="pl-4">
                        <div class="d-flex align-items-center">
                          <div class="avatar-circle">QO</div>
                          <span class="font-weight-bold text-dark"
                            >Qorin Rahmaniyah, S.Pd.</span
                          >
                        </div>
                      </td>
                      <td>17 GOGO 3 SelK2</td>
                      <td>LEAP - General English 2024 / GOGO 3</td>
                      <td>
                        <span class="badge badge-soft-success badge-pill-custom"
                          >Sudah Lapor</span
                        >
                      </td>
                      <td class="text-muted small">12 Jan 2026</td>
                      <td class="text-right pr-4">-</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Tabel Daftar Guru dengan Siswa Remidi -->
            <h4 class="mb-4 font-weight-bold mt-5">
              Daftar Guru dengan Siswa Remidi
            </h4>
            <div class="card card-custom overflow-hidden">
              <div class="table-responsive">
                <table class="table table-hover mb-0" id="remidiTable">
                  <thead class="bg-light">
                    <tr>
                      <th scope="col" class="pl-4">No</th>
                      <th scope="col">Nama Guru</th>
                      <th scope="col">Kelas</th>
                      <th scope="col">Kursus/Tingkatan</th>
                      <th scope="col" style="text-align: center">
                        Total Siswa
                      </th>
                      <th scope="col" style="text-align: center">
                        Siswa Remidi
                      </th>
                      <th scope="col" style="text-align: center">
                        Nilai Rata-rata
                      </th>
                      <th scope="col" class="text-right pr-4">Aksi</th>
                    </tr>
                  </thead>
                  <tbody id="remidiTableBody">
                    <!-- Content will be populated by JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </section>
      </div>

      <footer class="main-footer">
        <strong
          >Copyright &copy; 2022-2026
          <a href="https://leapsurabaya.sch.id/"
            >Leap English and Digital Class</a
          >.</strong
        >
        All rights reserved.
      </footer>

      <aside class="control-sidebar control-sidebar-dark"></aside>

      <!-- Modal Detail Remidi Siswa -->
      <div
        class="modal fade"
        id="remidiDetailModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="remidiDetailLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="remidiDetailLabel">
                <i
                  class="fas fa-exclamation-triangle mr-2"
                  style="color: #f97316"
                ></i>
                Detail Siswa Remidi -
                <span id="modalSemesterLabel">Semester Ini</span>
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div
              class="modal-body modal-detail-remidi"
              id="remidiDetailContent"
            ></div>
          </div>
        </div>
      </div>

      <div
        class="modal fade"
        id="detailSiswaRemidi"
        tabindex="-1"
        role="dialog"
        aria-labelledby="remidiDetailLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="detailSiswaRemidiLabel">
                <i
                  class="fas fa-exclamation-triangle mr-2"
                  style="color: #f97316"
                ></i>
                Detail Guru dengan siswa remidi -
                <span id="modalSiswaRemidi">Semester Ini</span>
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div
              class="modal-body modal-detail-remidi"
              id="detailSiswaRemidiContent"
            >
              <!-- Content will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Detail Guru dengan Siswa Remidi -->
      <div
        class="modal fade"
        id="guruRemidiModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="guruRemidiLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="guruRemidiLabel">
                <i
                  class="fas fa-chalkboard-user mr-2"
                  style="color: #a855f7"
                ></i>
                Daftar Guru dengan Siswa Remidi -
                <span id="modalGuruSemesterLabel">Semester Ini</span>
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body modal-detail-remidi" id="guruRemidiContent">
              <!-- Content will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery -->
    <script src="./plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="./plugins/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- AdminLTE App -->
    <script src="./js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <!-- <script src="./js/demo.js"></script> -->
    <script>
      lucide.createIcons();

      // Data Remidi dengan struktur berdasarkan semester
      const remidiData = {
        1: [
          // Semester 1
          {
            id: 1,
            guru: "Muhammad Yusril",
            guruInitial: "MY",
            kelas: "Coding 1C Curious Creators",
            kursus: "LEAP - Coding Class 2025",
            siswa: [
              { nama: "Andi Pratama", status: "Remidi" },
              { nama: "Budi Santoso", status: "Remidi" },
              { nama: "Citra Dewi", status: "Remidi" },
            ],
          },
          {
            id: 2,
            guru: "Ulfasiyah, S.S.",
            guruInitial: "UY",
            kelas: "09 GOGO 1 SR2",
            kursus: "LEAP - General English 2024",
            siswa: [
              { nama: "Dian Kusuma", status: "Remidi" },
              { nama: "Eka Putri", status: "Remidi" },
            ],
          },
          {
            id: 3,
            guru: "Rini Budi Rahayu, S.Pd.",
            guruInitial: "RB",
            kelas: "41 WINNER 6 SR3",
            kursus: "LEAP - General English 2024",
            siswa: [
              { nama: "Fajar Hermawan", status: "Remidi" },
              { nama: "Gina Malika", status: "Remidi" },
              { nama: "Hendra Wijaya", status: "Remidi" },
              { nama: "Indah Cahyani", status: "Remidi" },
            ],
          },
        ],
        2: [
          // Semester 2
          {
            id: 4,
            guru: "Muhammad Yusril",
            guruInitial: "MY",
            kelas: "Coding 2B Creative Mind",
            kursus: "LEAP - Coding Class 2025",
            siswa: [
              { nama: "Joko Susilo", status: "Remidi" },
              { nama: "Karina Sari", status: "Remidi" },
            ],
          },
          {
            id: 5,
            guru: "Qorin Rahmaniyah, S.Pd.",
            guruInitial: "QO",
            kelas: "17 GOGO 3 SelK2",
            kursus: "LEAP - General English 2024",
            siswa: [
              { nama: "Luki Pratama", status: "Remidi" },
              { nama: "Maya Selsabila", status: "Remidi" },
              { nama: "Nana Widia", status: "Remidi" },
            ],
          },
        ],
      };

      // Fungsi untuk mendapatkan semester saat ini
      function getCurrentSemester() {
        const selected = document.getElementById("globalSemesterFilter").value;
        if (selected === "") {
          return null; // Semua semester
        }
        return parseInt(selected);
      }

      // Fungsi untuk mendapatkan data remidi berdasarkan semester
      function getRemidiDataBySemester(semester) {
        if (semester === null) {
          // Gabungkan semua semester
          const allData = [...remidiData[1], ...remidiData[2]];
          return allData;
        }
        return remidiData[semester] || [];
      }

      // Fungsi untuk hitung total siswa remidi
      function getTotalRemidiStudents(semester) {
        const data = getRemidiDataBySemester(semester);
        return data.reduce((total, item) => total + item.siswa.length, 0);
      }

      // Fungsi untuk hitung total guru dengan siswa remidi
      function getTotalGuruRemidi(semester) {
        const data = getRemidiDataBySemester(semester);
        return data.length;
      }

      // Fungsi untuk update tampilan statistik
      // Fungsi untuk populate tabel remidi
      function populateRemidiTable() {
        const currentSemester = getCurrentSemester();
        const data = getRemidiDataBySemester(currentSemester);
        const tableBody = document.getElementById("remidiTableBody");
        let content = "";

        if (data.length === 0) {
          content = `
            <tr>
              <td colspan="8" class="text-center py-5 text-muted">
                <i class="fas fa-inbox fa-2x mb-3 text-light-gray"></i>
                <p class="mb-0">Tidak ada data guru dengan siswa remidi untuk periode ini.</p>
              </td>
            </tr>
          `;
        } else {
          data.forEach((item, index) => {
            const avatarColor = index % 2 === 0 ? "#dbeafe" : "#fce7f3";
            const avatarTextColor = index % 2 === 0 ? "#1d4ed8" : "#be185d";
            content += `
              <tr>
                <td class="pl-4">${index + 1}</td>
                <td>
                  <div class="d-flex align-items-center">
                    <div class="avatar-circle" style="background-color: ${avatarColor}; color: ${avatarTextColor};">
                      ${item.guruInitial}
                    </div>
                    <span class="font-weight-bold text-dark">${item.guru}</span>
                  </div>
                </td>
                <td>${item.kelas}</td>
                <td>${item.kursus}</td>
                <td style="text-align: center;">
                  <span class="badge badge-info badge-pill-custom">${guruRemidiDetail[item.id].totalSiswa}</span>
                </td>
                <td style="text-align: center;">
                  <span class="badge badge-soft-danger badge-pill-custom">${item.siswa.length}</span>
                </td>
                <td style="text-align: center;">
                  <span class="badge badge-soft-warning badge-pill-custom">${guruRemidiDetail[item.id].nilaiRataRata.toFixed(1)}</span>
                </td>
                <td class="text-right pr-4">
                  <button
                    class="btn btn-sm btn-outline-info text-dark font-weight-bold"
                    style="border-color: #3b82f6; background-color: transparent;"
                    onmouseover="this.style.backgroundColor = '#dbeafe'"
                    onmouseout="this.style.backgroundColor = 'transparent'"
                    onclick="showGuruDetail(${index})"
                  >
                    <i class="fas fa-eye mr-1 text-info"></i>
                    Detail
                  </button>
                </td>
              </tr>
            `;
          });
        }

        tableBody.innerHTML = content;
      }

      function updateRemidiStats() {
        const currentSemester = getCurrentSemester();
        const totalSiswa = getTotalRemidiStudents(currentSemester);
        const totalGuru = getTotalGuruRemidi(currentSemester);

        document.getElementById("totalSiswaRemidi").textContent = totalSiswa;
        document.getElementById("totalGuruRemidi").textContent = totalGuru;

        // Update label semester di modal
        let semesterLabel = currentSemester
          ? `Semester ${currentSemester}`
          : "Semua Semester";
        document.getElementById("modalSemesterLabel").textContent =
          semesterLabel;
        document.getElementById("modalGuruSemesterLabel").textContent =
          semesterLabel;

        // Populate tabel remidi
        populateRemidiTable();
      }

      // Fungsi untuk populate modal detail siswa remidi
      function populateRemidiDetailModal() {
        const currentSemester = getCurrentSemester();
        const data = getRemidiDataBySemester(currentSemester);
        let content = "";

        if (data.length === 0) {
          content =
            '<div class="alert alert-info">Tidak ada data siswa remidi untuk periode ini.</div>';
        } else {
          data.forEach((item, index) => {
            content += `
              <div class="guru-section">
                <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                  <div class="avatar-circle" style="width: 40px; height: 40px; background-color: #dbeafe; color: #1d4ed8; font-size: 0.9rem;">
                    ${item.guruInitial}
                  </div>
                  <div style="flex: 1;">
                    <h6 class="mb-0" style="font-weight: 600; color: #1e293b;">${item.guru}</h6>
                    <small class="text-muted">${item.kelas}</small>
                  </div>
                </div>

                <div style="margin-bottom: 1rem;">
                  <small style="color: #64748b; font-weight: 600;">Kursus:</small>
                  <p style="margin: 0.25rem 0 0 0; color: #475569;">${item.kursus}</p>
                </div>

                <div>
                  <small style="color: #64748b; font-weight: 600; text-transform: uppercase;">Siswa Remidi (${item.siswa.length}):</small>
                  <ul style="margin: 0.75rem 0 0 0; padding-left: 1.25rem; list-style: none;">
                    ${item.siswa
                      .map(
                        (s, idx) => `
                      <li style="padding: 0.35rem 0; color: #334155;">
                        <i class="fas fa-circle" style="font-size: 0.35rem; margin-right: 0.5rem; color: #f97316;"></i>
                        ${s.nama}
                      </li>
                    `,
                      )
                      .join("")}
                  </ul>
                </div>
              </div>
            `;
          });
        }

        document.getElementById("remidiDetailContent").innerHTML = content;
      }

      // Fungsi untuk populate modal guru dengan siswa remidi
      function populateGuruRemidiModal() {
        const currentSemester = getCurrentSemester();
        const data = getRemidiDataBySemester(currentSemester);
        let content = "";

        if (data.length === 0) {
          content =
            '<div class="alert alert-info">Tidak ada guru dengan siswa remidi untuk periode ini.</div>';
        } else {
          content =
            '<table class="table table-hover" style="margin-bottom: 0;">';
          content += `
            <thead class="remidi-table-header">
              <tr>
                <th>No</th>
                <th>Nama Guru</th>
                <th>Kelas</th>
                <th>Jumlah Siswa Remidi</th>
              </tr>
            </thead>
            <tbody>
          `;

          data.forEach((item, idx) => {
            content += `
              <tr style="cursor: pointer;" onclick="showGuruDetail(${idx})">
                <td>${idx + 1}</td>
                <td>
                  <div style="display: flex; align-items: center;">
                    <div class="avatar-circle" style="width: 32px; height: 32px; background-color: #dbeafe; color: #1d4ed8; font-size: 0.8rem; margin-right: 0.5rem;">
                      ${item.guruInitial}
                    </div>
                    <span>${item.guru}</span>
                  </div>
                </td>
                <td>${item.kelas}</td>
                <td>
                  <span class="badge badge-pill" style="background-color: #f97316; color: white;">
                    ${item.siswa.length}
                  </span>
                </td>
              </tr>
            `;
          });

          content += "</tbody></table>";
        }

        document.getElementById("guruRemidiContent").innerHTML = content;
      }

      // Data mockup detail remidi untuk setiap guru
      const guruRemidiDetail = {
        1: {
          guru: "Muhammad Yusril",
          guruInitial: "MY",
          email: "m.yusril@leapsurabaya.sch.id",
          noHP: "+62 812-3456-7890",
          kelas: "Coding 1C Curious Creators",
          kursus: "LEAP - Coding Class 2025",
          tingkat: "Tingkat 1",
          semester: 1,
          totalSiswa: 25,
          siswaSukses: 22,
          siswaRemidi: 3,
          nilaiRataRata: 78.5,
          statusRemidi: "Aktif",
          tanggalMulaiRemidi: "15 Januari 2026",
          siswa: [
            {
              nama: "Andi Pratama",
              nisn: "001",
              nilaiAkhir: 65,
              status: "Remidi",
              kehadiran: "95%",
              catatan: "Kurang pemahaman konsep looping",
            },
            {
              nama: "Budi Santoso",
              nisn: "002",
              nilaiAkhir: 62,
              status: "Remidi",
              kehadiran: "88%",
              catatan: "Kesulitan dengan array",
            },
            {
              nama: "Citra Dewi",
              nisn: "003",
              nilaiAkhir: 68,
              status: "Remidi",
              kehadiran: "92%",
              catatan: "Perlu penjelasan ulang function",
            },
          ],
        },
        2: {
          guru: "Ulfasiyah, S.S.",
          guruInitial: "UY",
          email: "ulfasiyah@leapsurabaya.sch.id",
          noHP: "+62 812-9876-5432",
          kelas: "09 GOGO 1 SR2",
          kursus: "LEAP - General English 2024",
          tingkat: "Tingkat 2",
          semester: 1,
          totalSiswa: 20,
          siswaSukses: 18,
          siswaRemidi: 2,
          nilaiRataRata: 82.3,
          statusRemidi: "Aktif",
          tanggalMulaiRemidi: "18 Januari 2026",
          siswa: [
            {
              nama: "Dian Kusuma",
              nisn: "004",
              nilaiAkhir: 70,
              status: "Remidi",
              kehadiran: "90%",
              catatan: "Speaking skill perlu ditingkatkan",
            },
            {
              nama: "Eka Putri",
              nisn: "005",
              nilaiAkhir: 72,
              status: "Remidi",
              kehadiran: "87%",
              catatan: "Grammar masih kurang",
            },
          ],
        },
        3: {
          guru: "Rini Budi Rahayu, S.Pd.",
          guruInitial: "RB",
          email: "rini.rahayu@leapsurabaya.sch.id",
          noHP: "+62 812-5555-6666",
          kelas: "41 WINNER 6 SR3",
          kursus: "LEAP - General English 2024",
          tingkat: "Tingkat 3",
          semester: 1,
          totalSiswa: 28,
          siswaSukses: 24,
          siswaRemidi: 4,
          nilaiRataRata: 75.8,
          statusRemidi: "Aktif",
          tanggalMulaiRemidi: "20 Januari 2026",
          siswa: [
            {
              nama: "Fajar Hermawan",
              nisn: "006",
              nilaiAkhir: 65,
              status: "Remidi",
              kehadiran: "85%",
              catatan: "Listening comprehension lemah",
            },
            {
              nama: "Gina Malika",
              nisn: "007",
              nilaiAkhir: 68,
              status: "Remidi",
              kehadiran: "91%",
              catatan: "Vocabulary perlu diperluas",
            },
            {
              nama: "Hendra Wijaya",
              nisn: "008",
              nilaiAkhir: 64,
              status: "Remidi",
              kehadiran: "82%",
              catatan: "Perlu bimbingan intensif",
            },
            {
              nama: "Indah Cahyani",
              nisn: "009",
              nilaiAkhir: 70,
              status: "Remidi",
              kehadiran: "88%",
              catatan: "Writing skill kurang",
            },
          ],
        },
        4: {
          guru: "Muhammad Yusril",
          guruInitial: "MY",
          email: "m.yusril@leapsurabaya.sch.id",
          noHP: "+62 812-3456-7890",
          kelas: "Coding 2B Creative Mind",
          kursus: "LEAP - Coding Class 2025",
          tingkat: "Tingkat 2",
          semester: 2,
          totalSiswa: 24,
          siswaSukses: 22,
          siswaRemidi: 2,
          nilaiRataRata: 81.2,
          statusRemidi: "Aktif",
          tanggalMulaiRemidi: "10 Februari 2026",
          siswa: [
            {
              nama: "Joko Susilo",
              nisn: "010",
              nilaiAkhir: 69,
              status: "Remidi",
              kehadiran: "93%",
              catatan: "Database concept belum jelas",
            },
            {
              nama: "Karina Sari",
              nisn: "011",
              nilaiAkhir: 71,
              status: "Remidi",
              kehadiran: "89%",
              catatan: "OOP principles masih bingung",
            },
          ],
        },
        5: {
          guru: "Qorin Rahmaniyah, S.Pd.",
          guruInitial: "QO",
          email: "qorin.rahmaniyah@leapsurabaya.sch.id",
          noHP: "+62 812-7777-8888",
          kelas: "17 GOGO 3 SelK2",
          kursus: "LEAP - General English 2024",
          tingkat: "Tingkat 3",
          semester: 2,
          totalSiswa: 26,
          siswaSukses: 23,
          siswaRemidi: 3,
          nilaiRataRata: 79.6,
          statusRemidi: "Aktif",
          tanggalMulaiRemidi: "12 Februari 2026",
          siswa: [
            {
              nama: "Luki Pratama",
              nisn: "012",
              nilaiAkhir: 67,
              status: "Remidi",
              kehadiran: "86%",
              catatan: "Conversation practice diperlukan",
            },
            {
              nama: "Maya Selsabila",
              nisn: "013",
              nilaiAkhir: 69,
              status: "Remidi",
              kehadiran: "90%",
              catatan: "Reading comprehension perlu diperbaiki",
            },
            {
              nama: "Nana Widia",
              nisn: "014",
              nilaiAkhir: 68,
              status: "Remidi",
              kehadiran: "88%",
              catatan: "Pronunciation dan fluency improvement",
            },
          ],
        },
      };

      // Fungsi untuk show detail guru (bisa diexpand)
      window.showGuruDetail = function (index) {
        const currentSemester = getCurrentSemester();
        const data = getRemidiDataBySemester(currentSemester);
        const item = data[index];
        const detail = guruRemidiDetail[item.id];

        if (!detail) {
          alert("Detail tidak ditemukan");
          return;
        }

        // Create a more detailed modal instead of alert
        let content = `
          <div style="font-size: 0.875rem;">
            <!-- Header Info -->
            <div style="background-color: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem; border-left: 4px solid #f97316;">
              <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #f97316 0%, #fb923c 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 1.1rem; margin-right: 1rem;">
                  ${detail.guruInitial}
                </div>
                <div>
                  <h6 style="margin: 0; font-weight: 600; color: #1e293b;">${detail.guru}</h6>
                  <small style="color: #64748b;">${detail.email} | ${detail.noHP}</small>
                </div>
              </div>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                <div>
                  <small style="color: #64748b; font-weight: 600;">Kelas</small>
                  <p style="margin: 0.25rem 0 0 0; color: #475569;">${detail.kelas}</p>
                </div>
                <div>
                  <small style="color: #64748b; font-weight: 600;">Kursus</small>
                  <p style="margin: 0.25rem 0 0 0; color: #475569;">${detail.kursus}</p>
                </div>
                <div>
                  <small style="color: #64748b; font-weight: 600;">Tingkat</small>
                  <p style="margin: 0.25rem 0 0 0; color: #475569;">${detail.tingkat}</p>
                </div>
                <div>
                  <small style="color: #64748b; font-weight: 600;">Status</small>
                  <p style="margin: 0.25rem 0 0 0;"><span style="background-color: #dcfce7; color: #166534; padding: 0.25rem 0.75rem; border-radius: 9999px; font-weight: 600; font-size: 0.75rem;">${detail.statusRemidi}</span></p>
                </div>
              </div>
            </div>

            <!-- Statistics -->
            <div style="margin-bottom: 1.5rem;">
              <h6 style="margin: 0 0 1rem 0; font-weight: 600; color: #1e293b; border-bottom: 2px solid #f1f5f9; padding-bottom: 0.5rem;">Statistik Kelas</h6>
              <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                <div style="background-color: #dbeafe; padding: 0.75rem; border-radius: 0.5rem; text-align: center;">
                  <div style="font-weight: 600; font-size: 1.5rem; color: #1e40af;">${detail.totalSiswa}</div>
                  <small style="color: #1e40af; font-weight: 600;">Total Siswa</small>
                </div>
                <div style="background-color: #dcfce7; padding: 0.75rem; border-radius: 0.5rem; text-align: center;">
                  <div style="font-weight: 600; font-size: 1.5rem; color: #166534;">${detail.siswaSukses}</div>
                  <small style="color: #166534; font-weight: 600;">Siswa Sukses</small>
                </div>
                <div style="background-color: #ffedd5; padding: 0.75rem; border-radius: 0.5rem; text-align: center;">
                  <div style="font-weight: 600; font-size: 1.5rem; color: #9a3412;">${detail.siswaRemidi}</div>
                  <small style="color: #9a3412; font-weight: 600;">Siswa Remidi</small>
                </div>
              </div>
            </div>

            <!-- Siswa Remidi Detail Table -->
            <div>
              <h6 style="margin: 0 0 1rem 0; font-weight: 600; color: #1e293b; border-bottom: 2px solid #f1f5f9; padding-bottom: 0.5rem;">Detail Siswa Remidi (${detail.siswa.length})</h6>
              <table style="width: 100%; border-collapse: collapse; font-size: 0.8rem;">
                <thead>
                  <tr style="background-color: #f8fafc;">
                    <th style="padding: 0.5rem; text-align: left; border-bottom: 1px solid #e2e8f0; font-weight: 600; color: #64748b;">Nama</th>
                    <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid #e2e8f0; font-weight: 600; color: #64748b;">Nilai</th>
                    <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid #e2e8f0; font-weight: 600; color: #64748b;">Kehadiran</th>
                    <th style="padding: 0.5rem; text-align: left; border-bottom: 1px solid #e2e8f0; font-weight: 600; color: #64748b;">Catatan</th>
                  </tr>
                </thead>
                <tbody>
                  ${detail.siswa
                    .map(
                      (s, idx) => `
                    <tr style="border-bottom: 1px solid #f1f5f9;">
                      <td style="padding: 0.5rem; color: #334155;"><strong>${s.nama}</strong></td>
                      <td style="padding: 0.5rem; text-align: center; color: #334155;">
                        <span style="background-color: ${s.nilaiAkhir >= 70 ? "#fee2e2" : "#ffedd5"}; color: ${s.nilaiAkhir >= 70 ? "#991b1b" : "#9a3412"}; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-weight: 600;">
                          ${s.nilaiAkhir}
                        </span>
                      </td>
                      <td style="padding: 0.5rem; text-align: center; color: #334155;">${s.kehadiran}</td>
                      <td style="padding: 0.5rem; color: #64748b; font-size: 0.75rem;"><em>${s.catatan}</em></td>
                    </tr>
                  `,
                    )
                    .join("")}
                </tbody>
              </table>
            </div>
          </div>
        `;

        // Show modal with detail
        const modal = new bootstrap.Modal(
          document.getElementById("detailSiswaRemidi"),
        );
        document.getElementById("detailSiswaRemidiContent").innerHTML = content;
        modal.show();
      };

      // Event listener untuk filter semester
      document
        .getElementById("globalSemesterFilter")
        .addEventListener("change", function () {
          updateRemidiStats();
        });

      // Initialize saat page load
      document.addEventListener("DOMContentLoaded", function () {
        updateRemidiStats();

        // Update modal saat dibuka
        $("#remidiDetailModal").on("show.bs.modal", function () {
          populateRemidiDetailModal();
        });

        $("#guruRemidiModal").on("show.bs.modal", function () {
          populateGuruRemidiModal();
        });
      });
    </script>
  </body>
</html>
